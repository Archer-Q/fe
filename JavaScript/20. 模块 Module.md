# 模块 Module

`ES6`(ES2015) 为 JavaScript 带来了语言层面的模块特性。

## export
`export` 语句用于**导出**模块内的类，函数，对象，数值等。

`slider.js`
```javascript
export class Slider {
  // ...
}
```
`lazyload.js`
```javascript

export function lazyload(images) {
  // ...
}
```
`constants.js`
```javascript
export const RECOMMEND_URL = 'https://qq-music-api.now.sh'
export const TOPLIST_URL = 'https://qq-music-api.now.sh/top'
export const SEARCH_URL = 'https://qq-music-api.now.sh/search'
export const LYRICS_URL = 'https://qq-music-api.now.sh/lyrics'
```

## import
`import` 语句用于**导入**模块内的类，函数，对象，数值等。

`toplist.js`
```javascript
import { lazyload } from './lazyload.js' 
import { TOPLIST_URL } from './constants.js'

export class TopList {
  // ...
}
```
`helpers.js`
```javascript
import { LYRICS_URL } from './constants.js'

export function lyricsUrl(songid) {
  return `${LYRICS_URL}?id=${songid}`
}

// ...
```

`music_players.js`
```javascript
import { ProgressBar } from './progress_bar.js'
import { LyricsPlayer } from './lyrics_player.js'
import { songUrl, lyricsUrl, albumCoverUrl } from './helpers.js'

export class MusicPlayer {
  // ...
}
```

## 浏览器支持
最新版的 Chrome 通过 `<script type="module" src="scripts/slider.js"></script>` 的方式支持模块。
```html
<script type="module" src="scripts/tab.js"></script>
<script type="module" src="scripts/slider.js"></script>
<script type="module" src="scripts/constants.js"></script>
<script type="module" src="scripts/helpers.js"></script>
<script type="module" src="scripts/lazyload.js"></script>
<script type="module" src="scripts/recommend.js"></script>
<script type="module" src="scripts/toplist.js"></script>
<script type="module" src="scripts/search.js"></script>
<script type="module" src="scripts/progress_bar.js"></script>
<script type="module" src="scripts/lyrics_player.js"></script>
<script type="module" src="scripts/music_player.js"></script>
<script type="module" src="scripts/app.js"></script>
```

## Webpack
Webpack 是目前最流行的打包工具，支持 ES6 模块。使用 Webpack 时 `import` 可省略 `.js` 后缀。


## 参考链接
* https://webpack.js.org
* https://ponyfoo.com/articles/es6-modules-in-depth
* https://jakearchibald.com/2017/es-modules-in-browsers
* https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import
* https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export
